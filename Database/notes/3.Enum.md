# üìò PostgreSQL ENUMs - Complete Guide

## üîç What is an ENUM in PostgreSQL?

An `ENUM` (short for **enumerated type**) is a **custom data type** that allows a column to have **only a specific set of predefined values**.

> ‚úÖ It enforces valid input directly at the **database level** ‚Äî ensuring data integrity and type safety.

---

## ‚úÖ Why Use ENUMs?

| Feature        | Benefit                                      |
|----------------|----------------------------------------------|
| üîí Type Safety | Only allows defined values ‚Äî e.g., `'bat'` or `'field'` |
| üöÄ Performance | Faster than checking values manually or with lookup tables |
| üßº Clean Code  | Improves readability of schemas and queries   |
| üì¶ Reusable    | Can be used in multiple tables                |

---

## üß± How to Declare an ENUM

### Step 1: Create ENUM type

```sql
CREATE TYPE toss_decision_enum AS ENUM ('bat', 'field');
````

This defines a new enum type called `toss_decision_enum`.

---

### Step 2: Use ENUM in a Table

```sql
CREATE TABLE Matches (
    match_id SERIAL PRIMARY KEY,
    toss_decision toss_decision_enum NOT NULL
);
```

Now, the `toss_decision` column only accepts `'bat'` or `'field'`.

---

## ‚ö†Ô∏è Common Mistake in PostgreSQL

```sql
-- ‚ùå INVALID: PostgreSQL doesn‚Äôt support inline enum like MySQL
CREATE TABLE Example (
    status ENUM('active', 'inactive')  -- ‚ùå Won't work
);
```

‚úÖ PostgreSQL requires ENUM to be defined separately using `CREATE TYPE`.

---

## üß™ Modifying an ENUM

You **can add** values to an ENUM but **cannot delete or reorder** them once used in data.

### Add a new value:

```sql
ALTER TYPE toss_decision_enum ADD VALUE 'undecided';
```

> ‚ö†Ô∏è ENUMs are immutable in terms of deletion or reordering, to avoid breaking existing data.

---

## üìä Real Use Cases in Projects

| Use Case        | ENUM Values                                          |
| --------------- | ---------------------------------------------------- |
| Toss decision   | `'bat'`, `'field'`                                   |
| Match result    | `'win'`, `'tie'`, `'no result'`                      |
| Player role     | `'batsman'`, `'bowler'`, `'all-rounder'`, `'keeper'` |
| Eliminator flag | `'yes'`, `'no'`                                      |

---

## üß† When to Use ENUM vs Lookup Table

| Situation                                         | Use ENUM? | Use Lookup Table? | Notes                          |
| ------------------------------------------------- | --------- | ----------------- | ------------------------------ |
| Very small, fixed set (2‚Äì5 values)                | ‚úÖ Yes     | ‚ùå No              | Fast and easy                  |
| Values might change or expand frequently          | ‚ùå No      | ‚úÖ Yes             | ENUMs are hard to modify later |
| Need to attach more info to values (e.g., labels) | ‚ùå No      | ‚úÖ Yes             | Use a full table               |
| Used across systems or need portability           | ‚ùå No      | ‚úÖ Yes             | ENUMs are PostgreSQL-specific  |

---

## üí¨ Example from IPL Project

### Define ENUMs:

```sql
CREATE TYPE toss_decision_enum AS ENUM ('bat', 'field');
CREATE TYPE match_result_enum AS ENUM ('win', 'tie', 'no result');
CREATE TYPE eliminator_enum AS ENUM ('yes', 'no');
```

### Use in table:

```sql
CREATE TABLE Matches (
    match_id SERIAL PRIMARY KEY,
    toss_decision toss_decision_enum NOT NULL,
    match_result match_result_enum NOT NULL,
    eliminator eliminator_enum NOT NULL
);
```

---

## üß† Summary

* Use `ENUM` to **restrict column values** to a known, valid list.
* Great for short, static values like statuses, decisions, flags, roles.
* Declared using `CREATE TYPE`, used like a regular column type.
* Easy to **add** values, but not to **delete or reorder**.
* Not ideal for values that need to be updated often or hold extra metadata.

---

## üîó Further Learning

* [PostgreSQL ENUM Docs](https://www.postgresql.org/docs/current/datatype-enum.html)
* [PostgreSQL ALTER TYPE](https://www.postgresql.org/docs/current/sql-altertype.html)

---